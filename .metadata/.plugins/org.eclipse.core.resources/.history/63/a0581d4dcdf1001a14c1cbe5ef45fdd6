
#include <stdio.h>
#include <math.h>
#include "operations.h"


/** \brief Recibe dos valores numéricos enteros, calcula la suma y devuelve el valor del resultado por referencia
 *
 * \param Valor correspondiente a la variable A
 * \param Valor correspondiente a la variable B
 * \param Valor correspondiente a la variable pResult
 * \return Devuelve si hubo error o no
 *
 */
int add(int a, int b, float* pResult)
{
	int ret = -1;
    int sum;

    if(pResult!=NULL)
    {
    	sum=a+b;
		*pResult=(float)sum;
		ret=0;
    }
    return ret;
}

/** \brief Recibe dos valores numéricos enteros, calcula la resta y devuelve el valor del resultado por referencia
 *
 * \param Valor correspondiente a la variable A
 * \param Valor correspondiente a la variable B
 * \param Valor correspondiente a pResult, se guarda el resultado en el contenido de la direccion de memoria que guarda la variable
 * \return Devuelve si hubo error o no
 *
 */
int subtract(int a, int b, float* pResult)
{
	int ret = -1;
	int subtraction;

	if(pResult!=NULL)
	{
		subtraction=a-b;
		*pResult=(float)subtraction;
		ret=0;
	}
	return ret;
}

/** \brief Recibe dos valores numéricos enteros, calcula la multiplicacion y devuelve el valor del resultado por referencia
 *
 * \param Valor correspondiente a la variable A
 * \param Valor correspondiente a la variable B
 * \param Valor correspondiente a pResult, se guarda el resultado en el contenido de la direccion de memoria que guarda la variable
 * \return Devuelve si hubo error o no
 *
 */
int multiply(int a, int b, float* pResult)
{
	int ret = -1;
	    int mult;

	    if(pResult!=NULL)
	    {
	    	if(abs(b)<=2147483647/abs(a)) //evitar overflow en una variable tipo int. (b*b)/b se usa para encontrar el valor absoluto de b sin usar otras librerias
	    	{
	    		mult=a*b;
				*pResult=(float)mult;
				ret=0;
	    	}else
	    	{
	    		ret=-2; //overflow
	    	}

	    }
	    return ret;
}

/** \brief Recibe dos valores numéricos enteros, calcula la division y devuelve el valor del resultado por referencia
 *
 * \param Valor correspondiente a la variable A
 * \param Valor correspondiente a la variable B
 * \param Valor correspondiente a pResult, se guarda el resultado en el contenido de la direccion de memoria que guarda la variable
 * \return Devuelve si hubo error o no
 *
 */
int divide(int a, int b, float* pResult)
{
	int   ret=-1;
    float division;

    if(b!=0 && pResult!=NULL)
    {
    	division=(float)a/b;
    	*pResult=division;
    	ret=0;
    }
    return ret;
}

/** \brief Recibe un valor numérico entero, calcula el factorial y devuelve el valor del resultado por referencia
 *
 * \param Valor correspondiente a la variable n
 * \param Valor correspondiente a ña variable pResult
 * \return Devuelve si hubo error y el tipo de error
 *
 */
int factorial(int n, float* pResult)
{
	int ret=-1;
    int result=1;
    int count;

    if(n>=0 && pResult!=NULL) //Dominio: numeros mayores o iguales a cero
    {
    	if(n<=12) //Evitar overflow, si se modifica el tipo de variable y/o sistema operativo el valor puede aumentar para usar numeros mayores
    	{
    		for(count=1;count<=n;count++)
			{
				result*=count;
			}
			*pResult=(float)result;
			ret=0;
    	}else
    	{
    		ret=-2; // Codigo para indicar overflow
    	}
    }
    return ret;
}

/*int factorial(int n)
{
    int respuesta;
    if(n==1)
    {
        return 1;
    }else
    {
        respuesta=n*factorial(n-1);
    }
    return respuesta;
}*/
